"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[61419],{28453(e,n,s){s.d(n,{R:()=>r,x:()=>a});var i=s(96540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},62747(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Computer/Application/Obsidian/Obsidian Web Clipper","title":"Obsidian Web Clipper","description":"\u754c\u9762","source":"@site/vault/Areas/Computer/90_Application/Obsidian/Obsidian Web Clipper.md","sourceDirName":"Computer/90_Application/Obsidian","slug":"/Computer/Application/Obsidian/Obsidian Web Clipper","permalink":"/docs/Computer/Application/Obsidian/Obsidian Web Clipper","draft":false,"unlisted":true,"tags":[],"version":"current","lastUpdatedAt":1769323519000,"frontMatter":{"modified":"2025-12-02T22:05","unlisted":true,"url":["https://obsidian.md/clipper","https://help.obsidian.md/web-clipper"],"aliases":["Obsidian \u526a\u85cf"],"date":"2025-12-02T22:03"},"sidebar":"obsidianSidebar"}');var t=s(74848),l=s(28453);const r={modified:"2025-12-02T22:05",unlisted:!0,url:["https://obsidian.md/clipper","https://help.obsidian.md/web-clipper"],aliases:["Obsidian \u526a\u85cf"],date:"2025-12-02T22:03"},a=void 0,o={},d=[{value:"\u754c\u9762",id:"\u754c\u9762",level:2},{value:"\u8bbe\u7f6e",id:"\u8bbe\u7f6e",level:2},{value:"\u6a21\u677f",id:"\u6a21\u677f",level:2},{value:"\u53d8\u91cf",id:"\u53d8\u91cf",level:2},{value:"\u8fc7\u6ee4\u5668",id:"\u8fc7\u6ee4\u5668",level:2},{value:"Examples",id:"examples",level:2},{value:"\u811a\u672c",id:"\u811a\u672c",level:2}];function p(e){const n={code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\u754c\u9762",children:"\u754c\u9762"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Header","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6a21\u677f"}),"\n",(0,t.jsx)(n.li,{children:"\u663e\u793a\u9875\u9762\u53d8\u91cf"}),"\n",(0,t.jsx)(n.li,{children:"\u9ad8\u4eae"}),"\n",(0,t.jsx)(n.li,{children:"\u5728\u9875\u9762\u4e2d\u6253\u5f00"}),"\n",(0,t.jsx)(n.li,{children:"\u8bbe\u7f6e"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Properties"}),"\n",(0,t.jsx)(n.li,{children:"Note content"}),"\n",(0,t.jsxs)(n.li,{children:["Footer","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6dfb\u52a0"}),"\n",(0,t.jsx)(n.li,{children:"\u6587\u4ef6\u5939"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u8bbe\u7f6e",children:"\u8bbe\u7f6e"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5e38\u89c4"}),"\n",(0,t.jsx)(n.li,{children:"\u5c5e\u6027"}),"\n",(0,t.jsx)(n.li,{children:"\u9ad8\u4eae"}),"\n",(0,t.jsx)(n.li,{children:"\u89e3\u91ca\u5668"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u6a21\u677f",children:"\u6a21\u677f"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u540d\u79f0"}),"\n",(0,t.jsx)(n.li,{children:"\u884c\u4e3a"}),"\n",(0,t.jsx)(n.li,{children:"\u6587\u4ef6\u540d"}),"\n",(0,t.jsx)(n.li,{children:"\u6587\u4ef6\u5939"}),"\n",(0,t.jsx)(n.li,{children:"\u5e93"}),"\n",(0,t.jsx)(n.li,{children:"\u89e6\u53d1\u5668"}),"\n",(0,t.jsx)(n.li,{children:"\u5c5e\u6027"}),"\n",(0,t.jsx)(n.li,{children:"\u5185\u5bb9"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u53d8\u91cf",children:"\u53d8\u91cf"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Preset variables"}),"\n",(0,t.jsx)(n.li,{children:"Prompt variables"}),"\n",(0,t.jsx)(n.li,{children:"Meta variables"}),"\n",(0,t.jsx)(n.li,{children:"Selector variables"}),"\n",(0,t.jsx)(n.li,{children:"Schema.org variables"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u8fc7\u6ee4\u5668",children:"\u8fc7\u6ee4\u5668"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Dates"}),"\n",(0,t.jsx)(n.li,{children:"Text conversion and capitalization"}),"\n",(0,t.jsx)(n.li,{children:"Text formatting"}),"\n",(0,t.jsx)(n.li,{children:"Numbers"}),"\n",(0,t.jsx)(n.li,{children:"HTML processing"}),"\n",(0,t.jsx)(n.li,{children:"Arrays and objects"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:"fold",children:'{\n  "schemaVersion": "0.1.0",\n  "name": "91",\n  "behavior": "create",\n  "noteContentFormat": "\\n{{selector:video?poster|image}}\\n",\n  "properties": [\n    {\n      "name": "title",\n      "value": "{{title}}",\n      "type": "text"\n    },\n    {\n      "name": "url",\n      "value": "{{url}}",\n      "type": "text"\n    },\n    {\n      "name": "image",\n      "value": "{{image}}",\n      "type": "text"\n    },\n    {\n      "name": "tags",\n      "value": "clippings/91, av",\n      "type": "multitext"\n    },\n    {\n      "name": "created",\n      "value": "{{date}}",\n      "type": "date"\n    }\n  ],\n  "triggers": [\n    "/^https:\\\\/\\\\/(.*)\\\\/video(s)?\\\\/view(hd)?\\\\/(.*)/"\n  ],\n  "noteNameFormat": "{{title|safe_name}}",\n  "path": "Inbox"\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:"fold",children:'{\n  "schemaVersion": "0.1.0",\n  "name": "51",\n  "behavior": "create",\n  "noteContentFormat": "\\n{{selector:div.post-content img[src*=jpeg]?src|slice:0,-1|image|join:\\"\\\\n\\\\n\\"}}\\n",\n  "properties": [\n    {\n      "name": "title",\n      "value": "{{title}}",\n      "type": "text"\n    },\n    {\n      "name": "url",\n      "value": "{{url}}",\n      "type": "text"\n    },\n    {\n      "name": "image",\n      "value": "",\n      "type": "text"\n    },\n    {\n      "name": "tags",\n      "value": "clippings/51, av",\n      "type": "multitext"\n    },\n    {\n      "name": "created",\n      "value": "{{date}}",\n      "type": "date"\n    }\n  ],\n  "triggers": [\n    "/https:\\\\/\\\\/(.*)\\\\/archives\\\\/(\\\\d+)/"\n  ],\n  "noteNameFormat": "{{title|safe_name}}",\n  "path": "Inbox"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u811a\u672c",children:"\u811a\u672c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:"fold",children:'import httpx\nimport re\nimport os\nfrom urllib.parse import urlparse, urljoin\nfrom datetime import datetime\nfrom bs4 import BeautifulSoup\n\n\nclass BaseParser:\n    DOMAIN = None\n    PATTERN = r".*"\n    TEMPLATE = """---\ntitle: {title}\nurl: {url}\nimage: {image}\ntags: {tags}\ncreated: {created}\n---\n\n{content}"""\n\n    def __init__(self):\n        self.soup = None\n        self.domain = self.DOMAIN\n        self.created = None\n        self.tags = None\n        self.url = None\n        self.title = None\n        self.image = None\n        self.images = []\n        self.content = ""\n\n    @classmethod\n    def match(cls, url):\n        return bool(re.search(cls.PATTERN, url))\n\n    def parse(self, url):\n        self.url = url\n        resp = httpx.get(self.url, timeout=30.0, follow_redirects=True)\n        resp.raise_for_status()\n        self.soup = BeautifulSoup(resp.content, "html.parser")\n\n        self.domain = (\n            self.DOMAIN or urlparse(self.url).netloc.replace("www.", "").split(".")[0]\n        )\n        self._parse_meta()\n        self._parse_content()\n        if not self.image:\n            self._set_image()\n        self.created = datetime.now().strftime("%Y-%m-%d")\n\n    def _parse_meta(self):\n        meta = self.soup.find("meta", property="og:title")\n        self.title = (\n            meta["content"]\n            if meta\n            else (self.soup.title.string if self.soup.title else "Untitled")\n        )\n\n        meta_image = self.soup.find("meta", property="og:image")\n        self.image = meta_image["content"] if meta_image else ""\n\n        self.tags = f"[clippings/{self.domain}]"\n\n    def _parse_content(self):\n        self.images = self._parse_images()\n        self.content = "\\n\\n".join(f"![]({img})" for img in self.images)\n\n    def _parse_images(self):\n        def normalize(img_url):\n            if img_url.startswith("//"):\n                return "https:" + img_url\n            elif img_url.startswith(("http://", "https://", "data:")):\n                return img_url\n            return urljoin(self.url, img_url)\n\n        images = []\n        seen = set()\n\n        for img in self.soup.find_all("img"):\n            if src := (img.get("src") or img.get("data-src")):\n                img_url = normalize(src)\n                if img_url not in seen:\n                    seen.add(img_url)\n                    images.append(img_url)\n\n        return images\n\n    def _set_image(self):\n        if self.images:\n            self.image = self.images[0]\n\n    def generate_markdown(self):\n        return self.TEMPLATE.format(\n            title=self.title,\n            url=self.url,\n            image=self.image,\n            tags=self.tags,\n            created=self.created,\n            content=self.content,\n        )\n\n\nclass WebToMarkdown:\n    PARSERS = [BaseParser]\n\n    def __init__(self, output_dir="./output"):\n        self.output_dir = output_dir\n        os.makedirs(output_dir, exist_ok=True)\n\n    def get_parser(self, url):\n        for parser_class in self.PARSERS:\n            if parser_class.match(url):\n                return parser_class()\n        return BaseParser()\n\n    def process_url(self, url):\n        try:\n            parser = self.get_parser(url)\n            parser.parse(url)\n            self._save(\n                os.path.join(self.output_dir, parser.domain),\n                re.sub(r"[^\\w\\-]", "_", parser.title)[:50] + ".md",\n                parser.generate_markdown(),\n            )\n        except Exception as e:\n            print(f"\u5904\u7406\u5931\u8d25 {url}: {e}")\n\n    def process_urls(self, urls):\n        for url in urls:\n            self.process_url(url)\n\n    def _save(self, folder, name, data):\n        os.makedirs(folder, exist_ok=True)\n        filepath = os.path.join(folder, name)\n\n        if os.path.exists(filepath):\n            print(f"\u8986\u76d6: {filepath}")\n\n        with open(filepath, "w", encoding="utf-8") as f:\n            f.write(data)\n\n        print(f"\u4fdd\u5b58: {filepath}")\n\n\nif __name__ == "__main__":\n    converter = WebToMarkdown()\n\n    urls = [\n        # \u5728\u8fd9\u91cc\u6dfb\u52a0\u8981\u5904\u7406\u7684URL\n    ]\n\n    converter.process_urls(urls)\n\n'})})]})}function c(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);