"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[9892],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>d});var a=i(96540);const l={},s=a.createContext(l);function t(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),a.createElement(s.Provider,{value:n},e.children)}},55031(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>r});const a=JSON.parse('{"id":"Computer/Application/Obsidian/Obsidian API","title":"Obsidian API","description":"app","source":"@site/vault/docs/Computer/90_Application/Obsidian/Obsidian API.md","sourceDirName":"Computer/90_Application/Obsidian","slug":"/Computer/Application/Obsidian/Obsidian API","permalink":"/docs/Computer/Application/Obsidian/Obsidian API","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1768301529000,"frontMatter":{"modified":"2025-10-14T20:27","aliases":["obsidian \u63a5\u53e3"],"url":["https://docs.obsidian.md/Reference/TypeScript+API/index","https://github.com/obsidianmd/obsidian-api"],"date":"2025-10-08T20:39"},"sidebar":"obsidianSidebar","next":{"title":"Obsidian Callouts","permalink":"/docs/Computer/Application/Obsidian/Obsidian Callouts"}}');var l=i(74848),s=i(28453);const t={modified:"2025-10-14T20:27",aliases:["obsidian \u63a5\u53e3"],url:["https://docs.obsidian.md/Reference/TypeScript+API/index","https://github.com/obsidianmd/obsidian-api"],date:"2025-10-08T20:39"},d=void 0,c={},r=[{value:"app",id:"app",level:2},{value:"vault",id:"vault",level:3},{value:"config",id:"config",level:4},{value:"fileManager",id:"filemanager",level:3},{value:"metadataCache",id:"metadatacache",level:3},{value:"tags",id:"tags",level:4},{value:"headings",id:"headings",level:4},{value:"unresolvedLinks",id:"unresolvedlinks",level:4},{value:"workspace",id:"workspace",level:3},{value:"WorkspaceLeaf",id:"workspaceleaf",level:4},{value:"recentFiles",id:"recentfiles",level:4},{value:"navFile",id:"navfile",level:4},{value:"\u5237\u65b0",id:"\u5237\u65b0",level:4},{value:"view",id:"view",level:4},{value:"Event",id:"event",level:3},{value:"hotkeys",id:"hotkeys",level:3},{value:"commands",id:"commands",level:3},{value:"setting",id:"setting",level:3},{value:"plugins",id:"plugins",level:3},{value:"bookmarks",id:"bookmarks",level:3},{value:"obsidian",id:"obsidian",level:2},{value:"electron",id:"electron",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function o(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"app",children:"app"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"commands"}),"\n",(0,l.jsx)(n.li,{children:"customCss"}),"\n",(0,l.jsx)(n.li,{children:"fileManager"}),"\n",(0,l.jsx)(n.li,{children:"hotkeyManager"}),"\n",(0,l.jsx)(n.li,{children:"internalPlugins"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"metadataCache"})}),"\n",(0,l.jsx)(n.li,{children:"plugins"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"vault"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"workspace"})}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"vault",children:"vault"}),"\n",(0,l.jsxs)(n.p,{children:["\u5e93\u8def\u5f84: ",(0,l.jsx)(n.code,{children:"$=app.vault.adapter.basePath"}),(0,l.jsx)(n.br,{}),"\n","\u914d\u7f6e\u6587\u4ef6\u5939: ",(0,l.jsx)(n.code,{children:"$=app.vault.configDir"}),(0,l.jsx)(n.br,{}),"\n","\u603b\u6587\u4ef6\u6570: ",(0,l.jsx)(n.code,{children:"$=app.vault.getFiles().length"}),(0,l.jsx)(n.br,{}),"\n","\u7b14\u8bb0\u6570: ",(0,l.jsx)(n.code,{children:'$=app.vault.getFiles().filter(f=>f.name.split(".").slice(-1)=="md").length'})]}),"\n",(0,l.jsx)(n.h4,{id:"config",children:"config"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.paragraph(app.vault.config)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"filemanager",children:"fileManager"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"renameFile"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"metadatacache",children:"metadataCache"}),"\n",(0,l.jsx)(n.h4,{id:"tags",children:"tags"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"const tags = app.metadataCache.getTags();\ndv.list(Object.keys(tags));\n"})}),"\n",(0,l.jsx)(n.h4,{id:"headings",children:"headings"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"//https://forum-zh.obsidian.md/t/topic/28337\nconst startHeadingLevel = 1\nconst file = app.workspace.getActiveFile()\nconst { headings } = app.metadataCache.getFileCache(file)\nconst lists = headings.map(p=>\n  `${' '.repeat((p.level - startHeadingLevel) * 4)}- ${p.heading}`\n)\ndv.paragraph(lists.join('\\n'))\n"})}),"\n",(0,l.jsx)(n.h4,{id:"unresolvedlinks",children:"unresolvedLinks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.list(Object.entries(app.metadataCache.unresolvedLinks).filter(([file, links]) => file !== \"broken links output.md\" && Object.keys(links).length > 0).map(([file, links]) => `${dv.fileLink(file, false, file)} -> ${Object.keys(links).map(x=>dv.fileLink(x)).join(',')}`))\n"})}),"\n",(0,l.jsx)(n.h3,{id:"workspace",children:"workspace"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"activeEditor"}),"\n",(0,l.jsx)(n.li,{children:"activeLeaf"}),"\n",(0,l.jsxs)(n.li,{children:["getLeaf(newLeaf, direction)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If newLeaf is false (or not set) then an existing leaf which can be navigated is returned, or a new leaf will be created if there was no leaf available."}),"\n",(0,l.jsx)(n.li,{children:"If newLeaf is 'tab' or true then a new leaf will be created in the preferred location within the root split and returned."}),"\n",(0,l.jsxs)(n.li,{children:["If newLeaf is 'split' then a new leaf will be created adjacent to the currently active leaf.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If direction is 'vertical', the leaf will appear to the right."}),"\n",(0,l.jsx)(n.li,{children:"If direction is 'horizontal', the leaf will appear below the current leaf."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"If newLeaf is 'window' then a popout window will be created with a new leaf inside."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"getActiveFile()"}),"\n",(0,l.jsx)(n.li,{children:"getActiveViewOfType(type)"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"workspaceleaf",children:"WorkspaceLeaf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"view"}),"\n",(0,l.jsx)(n.li,{children:"detach()"}),"\n",(0,l.jsx)(n.li,{children:"openFile(file, openState)"}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"recentfiles",children:"recentFiles"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.list(app.workspace.recentFileTracker.lastOpenFiles.filter(p=>app.vault.getAbstractFileByPath(p) && p.slice(-2) =='md').map(p=>dv.fileLink(p)))\n"})}),"\n",(0,l.jsx)(n.h4,{id:"navfile",children:"navFile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const wrap = (i, n) => ((i % n) + n) % n;\n\nfunction navFile(s) {\n    const cf = app.workspace.getActiveFile();\n    const fs = cf?.parent?.children?.filter(f => !f.children) || [];\n    const ci = fs.findIndex(f => f.path === cf.path);\n    if (fs.length > 1)\n        app.workspace.activeLeaf.openFile(fs[wrap(ci + s, fs.length)]);\n}\n\n// prev\nnavFile(-1);\n// next\nnavFile(1);\n"})}),"\n",(0,l.jsx)(n.h4,{id:"\u5237\u65b0",children:"\u5237\u65b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"await app.workspace.activeLeaf.rebuildView();\n"})}),"\n",(0,l.jsx)(n.h4,{id:"view",children:"view"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:"title:scrollTopBottom",children:"const view = app.workspace.activeLeaf?.view;\nconst {editor, currentMode} = view;\nconst lineCount = editor.lineCount();\n\nconst clamp = (line, max) => line < 0 ? Math.max(0, max + line + 1) : Math.min(line, max);\n\nconst scrollActions = {\n  source: (line) => editor.setCursor(clamp(line, lineCount), 0),\n  preview: (line) => currentMode.applyScroll(clamp(line, lineCount - 1))\n};\n\nscrollActions[view.getMode()]?.(0);  // -1 \u8868\u793a\u672b\u5c3e\n"})}),"\n",(0,l.jsx)(n.h3,{id:"event",children:"Event"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"app.plugins.plugins.quickadd.registerEvent(app.vault.on('create', downloadAttachments));\n"})}),"\n",(0,l.jsx)(n.h3,{id:"hotkeys",children:"hotkeys"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:'dv.table(["command", "hotkey"],Object.keys(app.hotkeyManager.customKeys).sort().map(k => [k, app.hotkeyManager.printHotkeyForCommand(k)]))\n'})}),"\n",(0,l.jsx)(n.h3,{id:"commands",children:"commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"app.commands.executeCommandById('editor:download-attachments');\n"})}),"\n",(0,l.jsx)(n.h3,{id:"setting",children:"setting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'app.setting.openTabById("community-plugins");\napp.setting.open();\napp.setting.activeTab.containerEl.find(".mod-cta").click();\n'})}),"\n",(0,l.jsx)(n.h3,{id:"plugins",children:"plugins"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:'dv.table(["id", "name", "version", "enabled"], Object.values(app.plugins.manifests).sort((a,b)=>a.id.localeCompare(b.id)).map(p=>[p.id, p.name, p.version, app.plugins.plugins[p.id] !== undefined]))\n'})}),"\n",(0,l.jsx)(n.h3,{id:"bookmarks",children:"bookmarks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.paragraph(Object.keys(app.internalPlugins.plugins.bookmarks.instance.bookmarkLookup).map(p=>dv.fileLink(p)))\n"})}),"\n",(0,l.jsx)(n.h2,{id:"obsidian",children:"obsidian"}),"\n",(0,l.jsx)(n.h2,{id:"electron",children:"electron"}),"\n",(0,l.jsxs)(n.p,{children:["\u7248\u672c\u53f7: ",(0,l.jsx)(n.code,{children:'$=require("electron").ipcRenderer.sendSync("version")'})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const window = require('electron').remote.getCurrentWindow();\nwindow.setOpacity(0.88);\nwindow.setAlwaysOnTop(true);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://forum-zh.obsidian.md/t/topic/50607",children:"obsidian\u5e38\u7528api\u6c47\u603b - \u5f00\u53d1\u8ba8\u8bba - Obsidian \u4e2d\u6587\u8bba\u575b"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);