"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[3579],{28453(e,n,i){i.d(n,{R:()=>t,x:()=>r});var a=i(96540);const l={},s=a.createContext(l);function t(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),a.createElement(s.Provider,{value:n},e.children)}},77010(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"Computer/Application/Obsidian/obsidian API","title":"app","description":"properties","source":"@site/vault/docs/Computer/90_Application/Obsidian/obsidian API.md","sourceDirName":"Computer/90_Application/Obsidian","slug":"/Computer/Application/Obsidian/obsidian API","permalink":"/docs/Computer/Application/Obsidian/obsidian API","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1768144823000,"frontMatter":{"modified":"2025-10-14T20:27","aliases":["obsidian \u63a5\u53e3"],"url":["https://docs.obsidian.md/Reference/TypeScript+API/index","https://github.com/obsidianmd/obsidian-api"],"date":"2025-10-08T20:39"},"sidebar":"obsidianSidebar","previous":{"title":"Obsidian","permalink":"/docs/Computer/Application/Obsidian/"},"next":{"title":"Obsidian \u914d\u7f6e\u6587\u4ef6","permalink":"/docs/Computer/Application/Obsidian/obsidian Config"}}');var l=i(74848),s=i(28453);const t={modified:"2025-10-14T20:27",aliases:["obsidian \u63a5\u53e3"],url:["https://docs.obsidian.md/Reference/TypeScript+API/index","https://github.com/obsidianmd/obsidian-api"],date:"2025-10-08T20:39"},r="app",d={},c=[{value:"properties",id:"properties",level:2},{value:"vault",id:"vault",level:2},{value:"config",id:"config",level:3},{value:"fileManager",id:"filemanager",level:2},{value:"metadataCache",id:"metadatacache",level:2},{value:"tags",id:"tags",level:3},{value:"headings",id:"headings",level:3},{value:"unresolvedLinks",id:"unresolvedlinks",level:3},{value:"workspace",id:"workspace",level:2},{value:"WorkspaceLeaf",id:"workspaceleaf",level:3},{value:"recentFiles",id:"recentfiles",level:3},{value:"navFile",id:"navfile",level:3},{value:"\u5237\u65b0",id:"\u5237\u65b0",level:3},{value:"view",id:"view",level:3},{value:"Event",id:"event",level:2},{value:"hotkeys",id:"hotkeys",level:2},{value:"commands",id:"commands",level:2},{value:"setting",id:"setting",level:2},{value:"plugins",id:"plugins",level:2},{value:"bookmarks",id:"bookmarks",level:2}];function o(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"app",children:"app"})}),"\n",(0,l.jsx)(n.h2,{id:"properties",children:"properties"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"// \u6253\u5370\u5bf9\u8c61\u5c5e\u6027\n(() => {\n    const obj = app;\n    const own = Object.getOwnPropertyNames(obj);\n    const proto = Object.getPrototypeOf(obj);\n    \n    dv.paragraph('own');\n    let ownData = own.sort((a, b) => a.localeCompare(b)).map(p => ({\n        name: p,\n        type: typeof obj[p],\n    }));\n    dv.table(['name', 'type'], ownData.map(p=>[p.name, p.type]));\n    \n    dv.paragraph('proto');\n    let protoData = Object.getOwnPropertyNames(proto).sort((a, b) => a.localeCompare(b)).map(p => ({\n        name: p,\n        type: typeof proto[p],\n    }));\n    dv.table(['name', 'type'], protoData.map(p=>[p.name, p.type]));\n    \n})();\n"})}),"\n",(0,l.jsx)(n.h2,{id:"vault",children:"vault"}),"\n",(0,l.jsxs)(n.p,{children:["\u5e93\u8def\u5f84: ",(0,l.jsx)(n.code,{children:"$=app.vault.adapter.basePath"}),(0,l.jsx)(n.br,{}),"\n","\u914d\u7f6e\u6587\u4ef6\u5939: ",(0,l.jsx)(n.code,{children:"$=app.vault.configDir"}),(0,l.jsx)(n.br,{}),"\n","\u603b\u6587\u4ef6\u6570: ",(0,l.jsx)(n.code,{children:"$=app.vault.getFiles().length"}),(0,l.jsx)(n.br,{}),"\n","\u7b14\u8bb0\u6570: ",(0,l.jsx)(n.code,{children:'$=app.vault.getFiles().filter(f=>f.name.split(".").slice(-1)=="md").length'})]}),"\n",(0,l.jsx)(n.h3,{id:"config",children:"config"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.paragraph(app.vault.config)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"filemanager",children:"fileManager"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"renameFile"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"metadatacache",children:"metadataCache"}),"\n",(0,l.jsx)(n.h3,{id:"tags",children:"tags"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"const tags = app.metadataCache.getTags();\ndv.list(Object.keys(tags));\n"})}),"\n",(0,l.jsx)(n.h3,{id:"headings",children:"headings"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"//https://forum-zh.obsidian.md/t/topic/28337\nconst startHeadingLevel = 1\nconst file = app.workspace.getActiveFile()\nconst { headings } = app.metadataCache.getFileCache(file)\nconst lists = headings.map(p=>\n  `${' '.repeat((p.level - startHeadingLevel) * 4)}- ${p.heading}`\n)\ndv.paragraph(lists.join('\\n'))\n"})}),"\n",(0,l.jsx)(n.h3,{id:"unresolvedlinks",children:"unresolvedLinks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.list(Object.entries(app.metadataCache.unresolvedLinks).filter(([file, links]) => file !== \"broken links output.md\" && Object.keys(links).length > 0).map(([file, links]) => `${dv.fileLink(file, false, file)} -> ${Object.keys(links).map(x=>dv.fileLink(x)).join(',')}`))\n"})}),"\n",(0,l.jsx)(n.h2,{id:"workspace",children:"workspace"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"activeLeaf"}),"\n",(0,l.jsxs)(n.li,{children:["getLeaf(newLeaf, direction)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If newLeaf is false (or not set) then an existing leaf which can be navigated is returned, or a new leaf will be created if there was no leaf available."}),"\n",(0,l.jsx)(n.li,{children:"If newLeaf is 'tab' or true then a new leaf will be created in the preferred location within the root split and returned."}),"\n",(0,l.jsxs)(n.li,{children:["If newLeaf is 'split' then a new leaf will be created adjacent to the currently active leaf.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"If direction is 'vertical', the leaf will appear to the right."}),"\n",(0,l.jsx)(n.li,{children:"If direction is 'horizontal', the leaf will appear below the current leaf."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"If newLeaf is 'window' then a popout window will be created with a new leaf inside."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"getActiveFile()"}),"\n",(0,l.jsx)(n.li,{children:"getActiveViewOfType(type)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"workspaceleaf",children:"WorkspaceLeaf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"view"}),"\n",(0,l.jsx)(n.li,{children:"detach()"}),"\n",(0,l.jsx)(n.li,{children:"openFile(file, openState)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"recentfiles",children:"recentFiles"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.list(app.workspace.recentFileTracker.lastOpenFiles.filter(p=>app.vault.getAbstractFileByPath(p) && p.slice(-2) =='md').map(p=>dv.fileLink(p)))\n"})}),"\n",(0,l.jsx)(n.h3,{id:"navfile",children:"navFile"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const wrap = (i, n) => ((i % n) + n) % n;\n\nfunction navFile(s) {\n    const cf = app.workspace.getActiveFile();\n    const fs = cf?.parent?.children?.filter(f => !f.children) || [];\n    const ci = fs.findIndex(f => f.path === cf.path);\n    if (fs.length > 1)\n        app.workspace.activeLeaf.openFile(fs[wrap(ci + s, fs.length)]);\n}\n\n// prev\nnavFile(-1);\n// next\nnavFile(1);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5237\u65b0",children:"\u5237\u65b0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"await app.workspace.activeLeaf.rebuildView();\n"})}),"\n",(0,l.jsx)(n.h3,{id:"view",children:"view"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",metastring:"title:scrollTopBottom",children:"const view = app.workspace.activeLeaf?.view;\nconst {editor, currentMode} = view;\nconst lineCount = editor.lineCount();\n\nconst clamp = (line, max) => line < 0 ? Math.max(0, max + line + 1) : Math.min(line, max);\n\nconst scrollActions = {\n  source: (line) => editor.setCursor(clamp(line, lineCount), 0),\n  preview: (line) => currentMode.applyScroll(clamp(line, lineCount - 1))\n};\n\nscrollActions[view.getMode()]?.(0);  // -1 \u8868\u793a\u672b\u5c3e\n"})}),"\n",(0,l.jsx)(n.h2,{id:"event",children:"Event"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"app.plugins.plugins.quickadd.registerEvent(app.vault.on('create', downloadAttachments));\n"})}),"\n",(0,l.jsx)(n.h2,{id:"hotkeys",children:"hotkeys"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:'dv.table(["command", "hotkey"],Object.keys(app.hotkeyManager.customKeys).sort().map(k => [k, app.hotkeyManager.printHotkeyForCommand(k)]))\n'})}),"\n",(0,l.jsx)(n.h2,{id:"commands",children:"commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"app.commands.executeCommandById('editor:download-attachments');\n"})}),"\n",(0,l.jsx)(n.h2,{id:"setting",children:"setting"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:'app.setting.openTabById("community-plugins");\napp.setting.open();\napp.setting.activeTab.containerEl.find(".mod-cta").click();\n'})}),"\n",(0,l.jsx)(n.h2,{id:"plugins",children:"plugins"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:'dv.table(["id", "name", "version", "enabled"], Object.values(app.plugins.manifests).sort((a,b)=>a.id.localeCompare(b.id)).map(p=>[p.id, p.name, p.version, app.plugins.plugins[p.id] !== undefined]))\n'})}),"\n",(0,l.jsx)(n.h2,{id:"bookmarks",children:"bookmarks"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-dataviewjs",children:"dv.paragraph(Object.keys(app.internalPlugins.plugins.bookmarks.instance.bookmarkLookup).map(p=>dv.fileLink(p)))\n"})}),"\n",(0,l.jsx)(n.h1,{id:"obsidian",children:"obsidian"}),"\n",(0,l.jsx)(n.h1,{id:"electron",children:"electron"}),"\n",(0,l.jsxs)(n.p,{children:["\u7248\u672c\u53f7: ",(0,l.jsx)(n.code,{children:'$=require("electron").ipcRenderer.sendSync("version")'})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-js",children:"const window = require('electron').remote.getCurrentWindow();\nwindow.setOpacity(0.88);\nwindow.setAlwaysOnTop(true);\n"})}),"\n",(0,l.jsx)(n.h1,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://forum-zh.obsidian.md/t/topic/50607",children:"obsidian\u5e38\u7528api\u6c47\u603b - \u5f00\u53d1\u8ba8\u8bba - Obsidian \u4e2d\u6587\u8bba\u575b"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);